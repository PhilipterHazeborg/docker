version: '3'
services:
  nextcloud:
    image: nextcloud
    restart: always
    ports:
      - 8008:80
    volumes:
      - ./data:/var/www/html
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_PASSWORD=nextcloud
      - MYSQL_DATABASE=nextcloud
      - MYSQL_USER=nextcloud
      - MYSQL_HOST=mariadb
      - REDIS_HOST=redis
      - REDIS_HOST_PASSWORD=redis
    networks:
      - openldap
networks:
  openldap:
    external: true